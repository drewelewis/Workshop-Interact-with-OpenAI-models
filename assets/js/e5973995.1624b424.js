"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[466],{910:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>h});var s=t(5893),o=t(1151);const r={},i="Conversation history",a={id:"labs/Conversation-history",title:"Conversation history",description:"As we've seen, natural language Generative AI models can produce unexpected or unwanted responses to prompts. This can be caused by any number of factors, including:",source:"@site/docs/04-labs/2-Conversation-history.md",sourceDirName:"04-labs",slug:"/labs/Conversation-history",permalink:"/Workshop-Interact-with-OpenAI-models/labs/Conversation-history",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Basic Prompting",permalink:"/Workshop-Interact-with-OpenAI-models/labs/Basic-Prompting"},next:{title:"System Message",permalink:"/Workshop-Interact-with-OpenAI-models/labs/System-Message"}},c={},h=[];function l(e){const n={a:"a",code:"code",em:"em",h1:"h1",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"conversation-history",children:"Conversation history"}),"\n",(0,s.jsx)(n.p,{children:"As we've seen, natural language Generative AI models can produce unexpected or unwanted responses to prompts. This can be caused by any number of factors, including:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Insufficient information in the training data"}),"\n",(0,s.jsx)(n.li,{children:"Insufficient context in the prompt"}),"\n",(0,s.jsx)(n.li,{children:"Lack of capability of the model itself"}),"\n",(0,s.jsx)(n.li,{children:'Hostile intent by the user providing the prompt ("jailbreaking")'}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["In this section we will see how adding system messages, one-shot examples and conversation history provide grounding for a model and these are not the only techniques. Prompt Engineering is a complex and rapidly-evolving practice. ",(0,s.jsx)(n.a,{href:"https://learn.microsoft.com/azure/cognitive-services/openai/concepts/advanced-prompt-engineering",children:"This article"})," on Microsoft Learn provides the latest guidance."]}),"\n",(0,s.jsx)(n.p,{children:"Consumer conversational AI services like ChatGPT and Bing Chat use a trick to make the AI agent seem to remember the context of the conversation. The trick is that the foundation model is given the whole chat history at each turn, not just the latest prompt, but the user does not see this. An AI model cannot learn and has no memory of previous interactions if the user leaves and comes back but the application is using prompt engineering to add this 'memory'"}),"\n",(0,s.jsx)(n.p,{children:"Try a conversation like this, enter the text below:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",metastring:'title="Enter in the user prompt:"',children:"How many neutrons are in a hydrogen nucleus?\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Click ",(0,s.jsx)(n.strong,{children:"Send"}),". The AI agent will respond with something like:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",metastring:'title="Enter in the user prompt:"',children:"A hydrogen nucleus (also called a proton) has 0 neutrons.\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"Without clearing the chat session"}),", add this response in the Chat Session:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",metastring:'title="Enter in the user prompt:"',children:"What about the isotopes?\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Click ",(0,s.jsx)(n.strong,{children:"Send"}),". The agent will respond with an answer involving isotopes of hydrogen: deuterium (one neutron) and tritium (two neutrons). Even though your second prompt did not mention hydrogen or neutrons, the response used the context of the chat to provide a more useful answer."]}),"\n",(0,s.jsx)(n.p,{children:"The key here is sending previous prompts back into the next request provides the model with more context and grounding and therefore providing a more valuable answer to the end user."}),"\n",(0,s.jsx)(n.p,{children:"Now do clear the chat session, and then once again send the prompt:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",metastring:'title="Enter in the user prompt:"',children:"What about the isotopes?\n"})}),"\n",(0,s.jsx)(n.p,{children:"Without the context of the prior messages, the model responds with a generalized answer about isotopes."})]})}function d(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>i});var s=t(7294);const o={},r=s.createContext(o);function i(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);